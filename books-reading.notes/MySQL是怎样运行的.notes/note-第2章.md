# 书<MySQL是怎样运行的 - 从根儿上理解MySQL> 阅读笔记

第2章
===

启动选项可以调整服务器启动后的一些行为。它们可以在命令行中指定，也可以将它们下入配置文件中。
在命令行中指定启动选项时，可以将各个启动选项写到一行中，每一个启动选项名称前面添加`--`，而且各个启动选项之间使用空白字符隔开。有一些启动选项不需要指定选项值，有些选项需要指定选项值。在命令行中指定有值的启动选项时需要注意，选项名、=、选项值之间不可以有空白字符。一些常用的启动选项具有短形式的选项名，使用短形式时在选项名前只加一个短划线`-`前缀。
服务器程序在启动时将会在一些给定的路径下搜索配置文件，不同操作系统的搜索路径是不同的：
| 路径名 | 备注 |
| --- | --- |
| /etc/my.cnf | |
| /etc/mysql/my.cnf | |
| SYSCONFDIR/my.cnf | |
| $MYSQL_HOME/my.cnf | 特定于服务器的选项（仅限服务器）|
| defaults-extra-file | 命令行指定的额外配置文件路径 |
| ~/.my.cnf | 特定于用户的选项|
| ~/.mylogin.cnf | 特定于用户的登录路径选项 （仅限客户端）|
> 会按照上述的路径**依次**寻找配置文件
> 如果多个配置文件中有相同的启动选项，则以最后一个配置文件中的为准 (OVERWRITE)
> 同一个配置文件中多个组的优先级，不同组中定义相同的启动选项，则以最后一个出现的组中的启动选项为准（OVERWRITE）

如果在启动时，指定defaults-file选项，则启动时只会在指定文件中搜索配置文件。
`mysqld --defaults-file=/tmp/myconfig.txt`

同一个启动选项既出现在命令行中，又出现在配置文件中，那么以命令行中的启动选项为准 （OVERWRITE）

系统变量时服务器程序中维护的一些变量，这些变量影响中服务器的行为。
* 在服务器启动时通过添加相应的启动选项进行修改；
* 在运行时使用SET语句修改：
  * SET [GLOBAL | SESSION] 系统变量名 = 值；
  * SET [@@(GLOBAL | SESSION)] 系统变量名 = 值；
* 查看系统变量的方式如下：
`SHOW [GLOBAL | SESSION] VARIABLES [LIKE 匹配的模式];`

系统变量是有作用域的，全局作用域的系统变量会作用于所有的客户端，SESSION作用域的系统变量只作用于当前的客户端。新的客户端采用全局作用域的系统变量作为初始化。上述的命令SET默认是作用域SESSION作用域的系统变量，也即当前客户端连接作用域。

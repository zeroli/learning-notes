# 书<C++编程惯用法>阅读笔记

第6章：考虑继承的设计
===

* 每个类都向外给出两个接口：一个面向用户，另外一个面向派生类；
* 对于一个会被用来作为基类的类来说，我们应该同时设计和记录下这两个接口（以及和它们相应的抽象模型）；
* 为继承所进行的设计会带来运行时的性能损耗，并使得抽象模型更加复杂。对于某些来说，它可能会很有用，但对于其它类来说则非如此；
* 所有被用来继承的类都应该拥有一个虚析构函数；
* 虚基类是在最外层的派生类中被初始化的；
* 避免使用保护型数据；
* 将小的、经常被调用的函数声明为虚函数会导致程序的运行速度显著变慢；
* 对于中等和大规模的成员函数来说，将它们声明为虚函数时不要犹豫---这样做并不会给性能带来显著的变化；
* 使用基类来提供影响到整个对象的服务。

下面给出一些应该由基类提供的服务的例子：
* 对对象进行持久化；
* 当对象被创建或被摧毁时向外产生一条调试信息；
* 维护对象中的计数器；
* 提供一种聪明的内存分配方式(operator new)，将它用于对象的新建和删除操作中。
这些提供的所有类都应该以某种方式对整个对象进行改变。
